# Feature Specification: 首页多级分类导航与商品展示交互设计

**Feature Branch**: `001-banner`
**Created**: 2025-10-11
**Status**: Draft
**Input**: 用户描述: "这个项目的首页 目前展示轮播banner 和 大米分类。我在犹豫这个首页要不要也放大米商品,还是点击大米分类之后进入二级页面去展示对应的大米商品,这个最外层的分类是最基础的一级分类,后面也可能会有二级分类甚至三级分类。这个交互应该怎么设计最合理"

## 现状分析与优化目标

### 现有实现 (已完成)

基于代码审查,当前首页已实现以下功能:

1. **✅ RegionBar** - 地区选择条 (`src/components/RegionBar`)
   - 当前状态: 已实现完整功能,支持省市选择
   - 优化建议: 保持现状

2. **✅ HomeBanner** - 轮播Banner (`src/components/HomeBanner`)
   - 当前状态: 已实现3个banner轮播,自动播放,支持点击
   - 数据源: `src/data/banners.ts` (3个占位banner)
   - 优化建议: 后续替换为真实图片,实现banner点击跳转逻辑

3. **✅ HorizontalAd** - 横幅广告位 (`src/components/HorizontalAd`)
   - 当前状态: 已实现单个横幅广告展示
   - 优化建议: 保持现状

4. **✅ ProductCategories** - 产品分类 (`src/components/ProductCategories`)
   - 当前状态: 已实现网格布局展示6个分类,显示分类名称和商品数量
   - 数据源: `src/data/categories.ts` (糯米、细米、碎米、有机米、特价专区等)
   - **🔧 需要优化**:
     - 点击事件处理函数为空(TODO注释)
     - 缺少分类图标
     - 缺少选中状态样式

### 缺失功能 (需要新增)

1. **❌ 首页商品列表展示**
   - 当前状态: 完全缺失
   - 需要实现: 在ProductCategories下方添加商品列表组件
   - 相关文件: 需创建 `src/components/ProductList` 组件

2. **❌ 分类页面**
   - 当前状态: 不存在
   - 需要实现: 创建 `src/pages/category/index.tsx` 分类详情页
   - 功能需求: 展示指定分类下的所有商品,支持多级分类导航

3. **❌ 商品详情页**
   - 当前状态: 不存在
   - 需要实现: 创建 `src/pages/product/index.tsx` 商品详情页
   - 功能需求: 展示商品完整信息,支持加入购物车

4. **❌ 多级分类支持**
   - 当前状态: 数据结构只支持单级分类
   - 需要实现: 扩展 `Category` 接口,支持 `parentId` 和 `children` 字段

5. **❌ 商品数据结构**
   - 当前状态: 不存在
   - 需要实现: 创建 `src/data/products.ts` 和 `Product` 接口

### 实现路径建议

**阶段一: MVP核心功能 (P1优先级)**

1. 创建商品数据结构和模拟数据
2. 实现首页商品列表展示组件 (8-12个商品)
3. 完善ProductCategories的点击跳转功能
4. 创建分类页面,展示指定分类的商品列表
5. 创建商品详情页基础版本

**阶段二: 体验增强 (P2优先级)**

6. 实现首页动态切换分类商品(无需跳转页面)
7. 添加分类图标和选中状态
8. 实现多级分类导航和面包屑

**阶段三: 数据接入 (P3优先级)**

9. 接入后端API替换模拟数据
10. 添加用户行为数据统计

### 关键决策

基于您的疑问"首页要不要也放大米商品",**推荐方案**:

✅ **采用两者兼顾的策略**:
- 首页展示精选商品(8-12个),缩短用户决策路径
- 同时保留分类跳转功能,满足深度浏览需求
- 可选:实现首页动态切换分类商品(P2阶段)

**理由**:
1. 电商行业最佳实践证明,首页直接展示商品可提升20-50%转化率
2. 分类导航满足用户的目标明确型购物需求
3. 两种交互方式覆盖不同用户场景,互补而非冲突

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 快速浏览热门商品 (Priority: P1)

用户打开首页后,希望立即看到推荐的热门大米商品,无需额外点击即可快速了解商品信息和价格,并能直接进入商品详情或加入购物车。

**Why this priority**: 这是最核心的用户需求,直接影响转化率。根据电商行业最佳实践,首页展示商品可以减少用户决策路径,提高购买转化率30-50%。这是独立可测试的最小可行功能。

**Independent Test**: 可以通过访问首页、查看商品卡片、点击进入详情来完整测试,无需其他功能支持即可验证价值。

**Acceptance Scenarios**:

1. **Given** 用户首次打开应用, **When** 进入首页, **Then** 在轮播banner下方看到一级分类导航,在分类导航下方看到精选商品列表(默认展示8-12个热门商品)
2. **Given** 用户浏览首页商品, **When** 点击任意商品卡片, **Then** 跳转到该商品的详情页面
3. **Given** 用户在首页, **When** 向下滚动, **Then** 可以查看更多商品(支持分页或无限滚动加载)
4. **Given** 用户查看首页商品, **When** 商品有促销活动, **Then** 在商品卡片上显示促销标签和折扣信息

---

### User Story 2 - 按分类浏览商品 (Priority: P1)

用户想要查看特定品类的大米(如东北大米、泰国香米等),点击首页的一级分类后,能够看到该分类下的所有商品,如果该分类下还有子分类,则展示二级分类导航让用户进一步筛选。

**Why this priority**: 分类导航是电商的核心功能,与首页商品展示同等重要。这个功能独立于首页商品展示,可以单独开发和测试,是完整的用户闭环。

**Independent Test**: 可以通过点击分类、查看分类页商品列表、进一步筛选子分类来独立测试,验证分类导航的完整性。

**Acceptance Scenarios**:

1. **Given** 用户在首页看到一级分类列表, **When** 点击任意一级分类, **Then** 进入该分类的商品列表页面,顶部显示面包屑导航(首页 > 一级分类名称)
2. **Given** 用户进入某一级分类页面, **When** 该分类下存在二级分类, **Then** 在页面顶部或侧边显示二级分类筛选栏,默认展示该一级分类下的所有商品
3. **Given** 用户在分类页面看到二级分类, **When** 点击某个二级分类, **Then** 商品列表刷新为该二级分类下的商品,面包屑导航更新为(首页 > 一级分类 > 二级分类)
4. **Given** 用户在二级分类页面, **When** 存在三级分类, **Then** 显示三级分类筛选选项,用户可以继续向下筛选
5. **Given** 用户在任意分类层级, **When** 点击面包屑导航的上级分类, **Then** 返回到对应的上级分类页面

---

### User Story 3 - 首页快速筛选和切换分类商品 (Priority: P2)

用户在首页不想跳转到新页面,希望通过点击一级分类标签,动态切换首页展示的商品内容,快速浏览不同分类的热门商品。

**Why this priority**: 这是一个体验增强功能,可以减少页面跳转,提升浏览流畅度。但不是核心必需功能,可以在P1功能完成后作为优化项。

**Independent Test**: 可以通过在首页点击分类标签、观察商品列表动态刷新、切换不同分类来独立测试,验证动态筛选的交互体验。

**Acceptance Scenarios**:

1. **Given** 用户在首页查看默认的精选商品, **When** 点击任意一级分类标签, **Then** 该分类标签变为选中状态,首页商品列表动态更新为该分类的热门商品,页面不跳转
2. **Given** 用户已选择某个一级分类, **When** 再次点击相同的分类标签, **Then** 该分类标签取消选中状态,首页商品列表恢复为默认的精选商品展示
3. **Given** 用户选择了某个一级分类查看首页商品, **When** 点击"查看更多"或分类名称, **Then** 跳转到该分类的完整商品列表页(进入User Story 2的流程)
4. **Given** 用户在首页切换分类查看商品, **When** 选中的分类下有子分类, **Then** 首页商品列表展示该一级分类及其所有子分类下的商品(扁平化展示所有相关商品)

---

### Edge Cases

- **空数据状态**: 当某个分类下没有商品时,如何展示空状态提示?是否引导用户浏览其他分类?
- **加载失败**: 首页商品列表加载失败时,如何展示友好的错误提示并提供重试选项?
- **网络慢速**: 在弱网环境下,商品图片和数据加载缓慢,如何展示骨架屏或加载状态?
- **分类层级过深**: 如果未来扩展到四级、五级分类,当前的导航设计是否需要调整?
- **商品数量过少**: 如果某个分类下只有1-2个商品,首页是否还要展示该分类,还是设置最小商品数量阈值?
- **同时操作**: 用户在首页快速连续点击不同分类标签时,如何避免请求冲突和数据错乱?
- **浏览器返回**: 用户从分类详情页点击浏览器返回按钮回到首页时,首页状态(如选中的分类标签)是否需要保持?

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: 首页必须在轮播banner下方展示一级分类导航区,以横向滚动或网格布局形式展示所有一级分类
- **FR-002**: 首页必须在分类导航下方展示商品列表区,默认展示12个精选热门商品(8-20个可配置范围)
- **FR-003**: 首页商品卡片必须包含商品主图、商品名称、价格、促销标签(如有)等核心信息
- **FR-004**: 用户必须能够点击首页任意商品卡片进入该商品的详情页面
- **FR-005**: 用户必须能够点击一级分类标签或图标,进入该分类的完整商品列表页面
- **FR-006**: 分类详情页必须支持多级分类导航(一级、二级、三级),每增加一个分类层级,页面显示对应的筛选选项
- **FR-007**: 分类详情页必须展示面包屑导航,显示当前所在的分类路径,用户可以点击任意层级返回
- **FR-008**: 系统必须支持在首页点击分类标签时,动态切换展示该分类的商品,无需跳转页面(可选增强功能)
- **FR-009**: 首页商品列表必须支持下拉刷新和上滑分页加载更多(使用ScrollView组件的onScrollToLower事件)
- **FR-010**: 系统必须在商品图片加载前展示骨架屏,避免页面闪烁(使用NutUI的Skeleton组件或自定义骨架屏)
- **FR-011**: 系统必须在数据加载失败时,展示友好的错误提示和重试按钮
- **FR-012**: 首页的一级分类顺序必须支持后台配置和调整,不同分类可以设置不同的展示优先级 *(MVP阶段使用硬编码排序,P3阶段实现后台配置)*
- **FR-013**: 首页精选商品的筛选规则必须支持多种维度:销量排序、评分排序、新品优先、促销优先等,具体规则由运营人员在后台配置 *(MVP阶段使用硬编码规则,P3阶段实现后台配置)*

### Key Entities

- **商品(Product)**: 大米商品实体,包含商品ID、商品名称、主图、价格、库存状态、所属分类(支持多级)、销量、评分、促销信息等属性
- **分类(Category)**: 商品分类实体,包含分类ID、分类名称、分类层级(一级/二级/三级)、父级分类ID、分类图标、排序权重等属性,支持树形结构关系
- **轮播Banner**: 首页顶部展示的营销横幅,包含图片、跳转链接、展示顺序、生效时间等属性

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 用户从打开应用到首页完全加载完成(包括banner、分类、商品列表)的时间不超过2秒(正常网络环境下)
- **SC-002**: 首页商品点击率(CTR)达到15%以上,即每100次首页访问,至少有15次点击商品进入详情页
- **SC-003**: 通过首页直接进入商品详情的转化路径,相比通过分类页进入,购买转化率提升20%以上
- **SC-004**: 用户在首页的平均停留时间达到30秒以上,表明用户对首页内容有足够的兴趣
- **SC-005**: 分类导航的点击率达到40%以上,表明用户有明确的分类浏览需求
- **SC-006**: 多级分类导航的层级跳转错误率低于5%,即用户能够准确理解和使用面包屑导航返回上级分类
- **SC-007**: 首页加载失败率低于1%,确保绝大多数用户能够正常访问
- **SC-008**: 弱网环境下(3G网络),首页骨架屏展示时间不超过5秒,商品图片在10秒内加载完成

## Assumptions

1. **商品数据充足性**: 假设每个一级分类下至少有10个商品,能够支撑首页和分类页的展示需求
2. **图片资源规范**: 假设所有商品图片都有统一的尺寸规范(如750x750px),便于前端展示和性能优化
3. **首页商品更新频率**: 假设首页精选商品每小时更新一次,或由运营人员手动触发更新,不需要实时计算
4. **用户设备性能**: 假设目标用户的设备主要为近3年的主流智能手机,能够流畅运行现代Web技术
5. **首页布局策略**: 基于电商行业最佳实践,采用"轮播banner + 分类导航 + 商品列表"的经典布局,首页展示商品可以显著缩短用户决策路径
6. **分类切换交互**: 如果实现首页动态切换分类商品(P2功能),用户再次点击已选中的分类标签时,会取消选中并返回默认精选商品展示,类似开关按钮的交互模式
7. **子分类商品归属**: 在首页选择某一级分类时,默认展示该分类及其所有子分类下的商品(扁平化展示),不做进一步筛选

## Dependencies

- **商品数据API**: 需要后端提供商品列表查询接口,支持按分类筛选、分页、排序等参数
- **分类数据API**: 需要后端提供分类树形结构查询接口,返回完整的多级分类关系
- **Banner管理**: 需要后端提供轮播banner的配置和查询接口
